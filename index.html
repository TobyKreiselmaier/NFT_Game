<html>
    <head>
        <title>Crypto Game</title>
        <script src="https://cdn.jsdelivr.net/npm/phaser@3.15.1/dist/phaser.min.js"></script>
    <head>

    <body>
        <h1>Game Website</h1>
        <h2>Game Second Website</h2>

    <script>
        // configure the game (height, width, render-type, game loop)

        let cursors, knight, crates, background;

        let config = {
            width: 800,
            height: 500,
            type: Phaser.AUTO,
            scene: {
                preload: gamePreload,
                create: gameCreate,
                update: gameUpdate
            },
            physics: {
                default: 'arcade',
                arcade: {
                    gravity: {
                        y: 300
                    },
                    debug: true // shows collision boxes
                }
            }
        }

        function gamePreload(){
            // loading assets
            console.log('Game is loading assets');
            this.load.image('background','assets/background.png');
            this.load.image('knight','assets/knight.png');
            this.load.image('crate','assets/crate.png');
        }

        function gameCreate(){
            // initial setup logic on the assets and other setup
            console.log('Game is setting up assets');

            // set background
            this.add.image(300, 150, 'background');

            // create knight
            knight = this.physics.add.sprite(200,100,'knight');
            knight.body.setSize(200,600,10,0); // resizing the collision box
            knight.scaleX = 0.15;
            knight.scaleY = knight.scaleX;

            // create the crates
            crates = this.physics.add.staticGroup();
            
            // floor
            crates.create(40,460,'crate');
            crates.create(120,460,'crate');
            crates.create(200,460,'crate');
            crates.create(280,460,'crate');
            crates.create(360,460,'crate');
            crates.create(440,460,'crate');

            // crates in the air
            crates.create(440,360,'crate');
            crates.create(480,260,'crate');
            crates.create(280,260,'crate');
            crates.create(180,220,'crate');
            crates.create(720,460,'crate');
            crates.create(590,370,'crate');
            crates.create(670,370,'crate');
            crates.create(620,120,'crate');


            this.physics.add.collider(crates,knight);

            cursors = this.input.keyboard.createCursorKeys();
        }

        function gameUpdate(){
            // monitoring inputs and telling game how to update - 60 x / sec
            // console.log('Game is updating');

            if(cursors.left.isDown){
                knight.setVelocityX(-100);
            } 
            else if(cursors.right.isDown){
                knight.setVelocityX(100);
            }
            else {
                knight.setVelocityX(0);
            }

            if(cursors.up.isDown && knight.body.touching.down){
                knight.setVelocityY(-300);
            } 
        }

        let game = new Phaser.Game(config);

    </script>

    <body>
</html>